(self["webpackChunknft_ship"]=self["webpackChunknft_ship"]||[]).push([[694],{9694:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return p}});var o=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"camera_outer"},[e("Icon",{staticClass:"back",attrs:{name:"back"},nativeOn:{click:function(r){return t.goBack.apply(null,arguments)}}}),e("video",{attrs:{id:"videoCamera",autoplay:""}}),e("canvas",{staticStyle:{display:"none"},attrs:{id:"canvasCamera",width:t.videoWidth,height:t.videoHeight}}),t.imgSrc?e("div",{staticClass:"img_bg_camera"},[e("img",{staticClass:"tx_img",attrs:{src:t.imgSrc,alt:""}})]):t._e(),e("button",{on:{click:function(r){t.setImage(),t.stopNavigator(),t.search()}}},[t._v(" 拍照 ")])],1)},i=[];e(1703),e(2801),e(8675),e(3462);function n(t){return t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}var a={name:"CameraTest",data(){return{videoWidth:300,videoHeight:300,imgSrc:"",thisCanvas:null,thisContext:null,thisVideo:null}},mounted(){this.getCompetence(),window.history&&window.history.pushState&&window.addEventListener("popstate",this.stopNavigator)},methods:{getCompetence(){const t=this;this.thisCanvas=document.getElementById("canvasCamera"),this.thisContext=this.thisCanvas.getContext("2d"),this.thisVideo=document.getElementById("videoCamera"),void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){const r=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;return r?new Promise((function(e,o){r.call(navigator,t,e,o)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});const r={audio:!1,video:{width:this.videoWidth,height:this.videoHeight,facingMode:"environment"}};navigator.mediaDevices.getUserMedia(r).then((function(r){"srcObject"in t.thisVideo?t.thisVideo.srcObject=r:t.thisVideo.src=window.URL.createObjectURL(r),t.thisVideo.onloadedmetadata=function(r){t.thisVideo.play()}})).catch((t=>{console.log(t)}))},setImage(){const t=this;t.thisContext.drawImage(t.thisVideo,0,0,t.videoWidth,t.videoHeight);const r=this.thisCanvas.toDataURL("image/png");t.imgSrc=r,this.$emit("refreshDataList",this.imgSrc)},dataURLtoFile(t,r){const e=t.split(","),o=e[0].match(/:(.*?);/)[1],i=atob(e[1]);let n=i.length;const a=new Uint8Array(n);while(n--)a[n]=i.charCodeAt(n);return new File([a],r,{type:o})},stopNavigator(){this.thisVideo.srcObject.getTracks()[0].stop()},store(){const t="https://aip.baidubce.com/rest/2.0/image-classify/v1/realtime_search/similar/add",r="哈哈哈哈----",e=this.thisCanvas.toDataURL("image/png").slice(22),o="image="+n(e)+"&brief="+r,i="24.af28718029713fd2397bec9d0f561e9f.2592000.1657244688.282335-26392949",a=t+"?access_token="+i,s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o};fetch(a,s).then((t=>t.json())).then((t=>{console.log(t)}))},search(){const t="https://aip.baidubce.com/rest/2.0/image-classify/v1/realtime_search/similar/search",r="24.af28718029713fd2397bec9d0f561e9f.2592000.1657244688.282335-26392949",e=`${t}?access_token=${r}`,o=this.thisCanvas.toDataURL("image/png").slice(22),i=`image=${n(o)}`,a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i};fetch(e,a).then((t=>t.json())).then((t=>{const r=t.result[0].brief,e=parseInt(r.slice(-1))-1,o=`/detail/${e}`;this.$router.push(o)}))},goBack(){this.$router.go(-1)}},destroyed(){window.removeEventListener("popstate",this.stopNavigator,!1)}},s=a,c=e(1001),d=(0,c.Z)(s,o,i,!1,null,"6b30f140",null),p=d.exports},5787:function(t,r,e){var o=e(7854),i=e(7976),n=o.TypeError;t.exports=function(t,r){if(i(r,t))return t;throw n("Incorrect invocation")}},4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,r,e){"use strict";var o,i,n,a=e(4019),s=e(9781),c=e(7854),d=e(614),p=e(111),h=e(2597),u=e(648),f=e(6330),E=e(8880),l=e(8052),m=e(3070).f,y=e(7976),R=e(9518),v=e(6405),g=e(5112),A=e(9711),_=c.Int8Array,T=_&&_.prototype,I=c.Uint8ClampedArray,C=I&&I.prototype,w=_&&R(_),O=T&&R(T),D=Object.prototype,N=c.TypeError,U=g("toStringTag"),S=A("TYPED_ARRAY_TAG"),b=A("TYPED_ARRAY_CONSTRUCTOR"),M=a&&!!v&&"Opera"!==u(c.opera),x=!1,V={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},k=function(t){if(!p(t))return!1;var r=u(t);return"DataView"===r||h(V,r)||h(L,r)},P=function(t){if(!p(t))return!1;var r=u(t);return h(V,r)||h(L,r)},Y=function(t){if(P(t))return t;throw N("Target is not a typed array")},F=function(t){if(d(t)&&(!v||y(w,t)))return t;throw N(f(t)+" is not a typed array constructor")},W=function(t,r,e,o){if(s){if(e)for(var i in V){var n=c[i];if(n&&h(n.prototype,t))try{delete n.prototype[t]}catch(a){try{n.prototype[t]=r}catch(d){}}}O[t]&&!e||l(O,t,e?r:M&&T[t]||r,o)}},B=function(t,r,e){var o,i;if(s){if(v){if(e)for(o in V)if(i=c[o],i&&h(i,t))try{delete i[t]}catch(n){}if(w[t]&&!e)return;try{return l(w,t,e?r:M&&w[t]||r)}catch(n){}}for(o in V)i=c[o],!i||i[t]&&!e||l(i,t,r)}};for(o in V)i=c[o],n=i&&i.prototype,n?E(n,b,i):M=!1;for(o in L)i=c[o],n=i&&i.prototype,n&&E(n,b,i);if((!M||!d(w)||w===Function.prototype)&&(w=function(){throw N("Incorrect invocation")},M))for(o in V)c[o]&&v(c[o],w);if((!M||!O||O===D)&&(O=w.prototype,M))for(o in V)c[o]&&v(c[o].prototype,O);if(M&&R(C)!==O&&v(C,O),s&&!h(O,U))for(o in x=!0,m(O,U,{get:function(){return p(this)?this[S]:void 0}}),V)c[o]&&E(c[o],S,o);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_CONSTRUCTOR:b,TYPED_ARRAY_TAG:x&&S,aTypedArray:Y,aTypedArrayConstructor:F,exportTypedArrayMethod:W,exportTypedArrayStaticMethod:B,isView:k,isTypedArray:P,TypedArray:w,TypedArrayPrototype:O}},8544:function(t,r,e){var o=e(7293);t.exports=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},9518:function(t,r,e){var o=e(7854),i=e(2597),n=e(614),a=e(7908),s=e(6200),c=e(8544),d=s("IE_PROTO"),p=o.Object,h=p.prototype;t.exports=c?p.getPrototypeOf:function(t){var r=a(t);if(i(r,d))return r[d];var e=r.constructor;return n(e)&&r instanceof e?e.prototype:r instanceof p?h:null}},4590:function(t,r,e){var o=e(7854),i=e(3002),n=o.RangeError;t.exports=function(t,r){var e=i(t);if(e%r)throw n("Wrong offset");return e}},3002:function(t,r,e){var o=e(7854),i=e(9303),n=o.RangeError;t.exports=function(t){var r=i(t);if(r<0)throw n("The argument can't be less than 0");return r}},8675:function(t,r,e){"use strict";var o=e(260),i=e(6244),n=e(9303),a=o.aTypedArray,s=o.exportTypedArrayMethod;s("at",(function(t){var r=a(this),e=i(r),o=n(t),s=o>=0?o:e+o;return s<0||s>=e?void 0:r[s]}))},3462:function(t,r,e){"use strict";var o=e(7854),i=e(6916),n=e(260),a=e(6244),s=e(4590),c=e(7908),d=e(7293),p=o.RangeError,h=o.Int8Array,u=h&&h.prototype,f=u&&u.set,E=n.aTypedArray,l=n.exportTypedArrayMethod,m=!d((function(){var t=new Uint8ClampedArray(2);return i(f,t,{length:1,0:3},1),3!==t[1]})),y=m&&n.NATIVE_ARRAY_BUFFER_VIEWS&&d((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));l("set",(function(t){E(this);var r=s(arguments.length>1?arguments[1]:void 0,1),e=c(t);if(m)return i(f,this,e,r);var o=this.length,n=a(e),d=0;if(n+r>o)throw p("Wrong length");while(d<n)this[r+d]=e[d++]}),!m||y)},2801:function(t,r,e){"use strict";var o=e(2109),i=e(5005),n=e(9114),a=e(3070).f,s=e(2597),c=e(5787),d=e(9587),p=e(6277),h=e(3678),u=e(7741),f=e(1913),E="DOMException",l=i("Error"),m=i(E),y=function(){c(this,R);var t=arguments.length,r=p(t<1?void 0:arguments[0]),e=p(t<2?void 0:arguments[1],"Error"),o=new m(r,e),i=l(r);return i.name=E,a(o,"stack",n(1,u(i.stack,1))),d(o,this,y),o},R=y.prototype=m.prototype,v="stack"in l(E),g="stack"in new m(1,2),A=v&&!g;o({global:!0,constructor:!0,forced:f||A},{DOMException:A?y:m});var _=i(E),T=_.prototype;if(T.constructor!==_)for(var I in f||a(T,"constructor",n(1,_)),h)if(s(h,I)){var C=h[I],w=C.s;s(_,w)||a(_,w,n(6,C.c))}}}]);
//# sourceMappingURL=694.03aff0cd.js.map